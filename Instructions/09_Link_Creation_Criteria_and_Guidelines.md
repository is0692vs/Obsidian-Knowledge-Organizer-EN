# 🔗 09\_リンク作成基準とガイドライン

## リンク作成の実践ガイド（作業フロー）

### Step 1: 用語特定・既存ファイル確認フェーズ

```text
【用語抽出・確認の手順】
1. 記事を通読し、技術用語をマーク
2. 著者名・サービス名を特定
3. 重要な概念・キーワードを抽出
4. 【重要】スラッシュ含み用語の置き換え処理：
   - 「CI/CD」→「CI_CD」に変換
   - 「HTML/CSS」→「HTML_CSS」に変換
   - 「OS/2」→「OS_2」に変換
   - この段階で用語表記を統一してから次の処理へ
5. 【重要】各用語について file_search で既存ファイル確認
5. 【重要】過度な細分化チェック：
   - API.mdが存在 → 「API設計」「API管理」等ではなく[[API]]を使用
   - Docker.mdが存在 → 「Docker基本」「Docker設定」等ではなく[[Docker]]を使用
   - 既存ファイルで扱える範囲の概念は新規作成しない
6. 【重要】表記揺れの種類別検索戦略：
   - 【ルールベース検出】文字列パターンによる表記揺れ：
     * スペース・ハイフン："OpenAI API" → file_search("OpenAI*API")
     * 大文字小文字："JavaScript" → grep_search("javascript", isRegexp=false)
     * 省略展開："API" → file_search("Application*Programming*Interface")
   - 【意味的検出】文脈理解が必要な表記揺れ：
     * 日英混在："AI" → semantic_search("人工知能 機械学習")
     * 略称正式："Azure" → semantic_search("Microsoft Azure MS Azure")
     * 同義語："フレームワーク" → semantic_search("ライブラリ framework library")
7. 同一ディレクトリ内の類似用語を semantic_search で確認
8. リンク密度を考慮して優先度付け
```

### Step 2: 表記統一・リンク名決定フェーズ

```text
【表記統一・リンク名の決定手順】
1. 既存ファイルが見つかった場合：
   → 既存ファイル名に表記を統一
   → 本文中の表記を既存リンク名に変更
   → 修飾語付きでも核となる概念が同じなら既存ファイルを使用
2. 複数の類似ファイルが見つかった場合：
   → 最も一般的・短い表記を主要ファイルとして選定
   → 他のファイルをリダイレクト形式に変更
3. 既存ファイルがない場合：
   → 修飾語を除いた核概念で再検索
   → 包括的なファイルが存在するなら新規作成を避ける
   → 真に新しい概念の場合のみ新規作成
4. 最終的なリンク名の決定
```

### Step 3: リンク作成実行フェーズ

```text
【リンク作成の実行手順】
1. file_searchで対象ファイルの存在確認
2. 存在しない場合は用語ファイル作成
3. 【重要】スラッシュを_に置換してリンク挿入：
   - 本文「CI/CD」→ [[CI_CD]]
   - 本文「HTML/CSS」→ [[HTML_CSS]]
   - 本文「OS/2」→ [[OS_2]]
4. リンク切れチェック実行
5. 次の用語へ進む
```

## リンク作成の基本原則

### 1. リンク作成の判断基準

#### 【最優先】既存ファイル積極活用ルール

**既存の.md ファイルが存在する用語は必ずリンク化：**

```text
【既存ファイル確認・リンク化手順】
1. file_searchで用語の存在確認を必ず実行
2. 【重要】表記揺れ検出のための追加検索：
   - スペース・ハイフンを含む用語の場合、それらを除いた検索も実行
   - 例：「OpenAI API」→ file_search("OpenAI*API") または grep_search("OpenAI.*API", isRegexp=true)
   - 例：「React-Router」→ file_search("React*Router") または grep_search("React.*Router", isRegexp=true)
3. 存在する場合は、表記を問わず積極的にリンク化
4. 表記揺れがある場合は統一処理を実行
5. 同一意味の複数ファイルがある場合は統合処理を実行

【重要】過度な概念細分化の回避：
- 例えば，API.mdが存在する場合は[[API設計]]ではなく[[API]]を使用
- 既存ファイルの範囲内で扱えるトピックは新規作成せず既存活用
- 「設計」「管理」「基本」等の修飾語付きリンクを避ける
- 包括的な概念ファイルの中で詳細を扱う方針を優先
```

#### 【重要】表記揺れの種類と検出方法

表記揺れには大きく分けて 2 つのタイプがあり、それぞれ異なる検出方法が必要です：

##### 🔍 **1. ルールベース検出可能な表記揺れ**

**特徴：文字列パターンで機械的に検出可能**

```text
【ルールベース表記揺れの例】
✓ スペース・ハイフン・アンダースコア：
  - OpenAI API ⟷ OpenAI-API ⟷ OpenAI_API ⟷ OpenAIAPI
  - React Router ⟷ React-Router ⟷ ReactRouter
  - Vue.js CLI ⟷ Vue.js-CLI ⟷ VuejsCLI

✓ 大文字・小文字：
  - JavaScript ⟷ javascript ⟷ Javascript
  - GitHub ⟷ github ⟷ Github

✓ 省略・展開：
  - API ⟷ Application Programming Interface
  - CLI ⟷ Command Line Interface
  - URL ⟷ Uniform Resource Locator
```

**検出方法：**

- `file_search("用語1*用語2")` でワイルドカード検索
- `grep_search("用語1.*用語2", isRegexp=true)` で正規表現検索
- 文字列パターンマッチングで確実に検出可能

##### 🧠 **2. 意味的解釈が必要な表記揺れ**

**特徴：文脈・意味理解がないと検出困難**

```text
【意味的表記揺れの例】
✓ 日本語⟷英語：
  - AI ⟷ 人工知能 ⟷ 機械学習
  - Cloud ⟷ クラウド ⟷ 雲
  - Database ⟷ データベース ⟷ DB

✓ 略称⟷正式名称：
  - Microsoft Azure ⟷ Azure ⟷ MS Azure
  - Amazon Web Services ⟷ AWS ⟷ アマゾンウェブサービス
  - Google Cloud Platform ⟷ GCP ⟷ グーグルクラウド

✓ 同義語・類義語：
  - 機械学習 ⟷ Machine Learning ⟷ ML
  - プログラミング ⟷ コーディング ⟷ 開発
  - フレームワーク ⟷ ライブラリ（文脈により）
```

**検出方法：**

- `semantic_search()` で意味的類似検索を実行
- AI エージェントによる文脈理解と判断が必須
- 同一ディレクトリ内の用語との意味的関連性チェック

##### 🚨 **検出戦略の使い分け**

```text
【表記揺れ検出の実行順序】
1. まずルールベース検索を実行（高速・確実）
   → file_search, grep_search でパターンマッチ
2. 次に意味的検索を実行（慎重・判断要）
   → semantic_search で類似概念を検出
3. 両方の結果を総合して統合判断
   → AIエージェントによる最終的な意味判断
```

**表記揺れの統一例：**

- Microsoft Azure ⟷ Azure → どちらも[[Azure]]に統一
- OpenAI API ⟷ OpenAI-API ⟷ OpenAIAPI → どちらも[[OpenAI API]]に統一（スペース版優先）
- React Router ⟷ React-Router ⟷ ReactRouter → どちらも[[React Router]]に統一（スペース版優先）
- AI ⟷ 人工知能 → どちらも[[AI]]に統一（短い方を優先）

**スペース・ハイフン表記のルール：**

- 公式ドキュメントでスペース区切り → スペース版をメイン
- 公式ドキュメントでハイフン区切り → ハイフン版をメイン
- 不明な場合 → スペース版を優先（読みやすさ重視）

#### 表記揺れ・同義語統合プロトコル

**【重要】同一意味ファイルの重複回避：**

```text
【同義語チェック・統合手順】
1. 新規リンク作成前に同一ディレクトリ内で類似用語を検索
2. semantic_searchで意味的に同じ用語を検出
3. 表記揺れや同義語が発見された場合は統合処理を実行
4. メインファイルを選定（優先順位：公式名称 > 短い表記 > 使用頻度）
5. サブファイルをリダイレクト形式に変更
6. 既存リンクをメインファイル表記に一括置換
```

**統合の具体例：**

**統合前：**

```
Words/Tools/OpenAI API.md（詳細内容）
Words/Tools/OpenAI-API.md（詳細内容）
Words/Tools/ChatGPT API.md（詳細内容）
```

**統合後：**

```
Words/Tools/OpenAI API.md（詳細内容・メインファイル）
Words/Tools/OpenAI-API.md（リダイレクト）
Words/Tools/ChatGPT API.md（独立・異なるサービス）
```

**リダイレクトファイルの標準形式：**

```markdown
# OpenAI-API

[[OpenAI API]]と同義です。OpenAI 社が提供する API サービスの表記揺れ。

詳細は[[OpenAI API]]を参照してください。

## 関連概念

- [[OpenAI API]] - 正式表記
```

**メインファイル選定の優先順位：**

1. **公式名称** > 略語・俗称
2. **短い表記** > 長い表記（同等の場合）
3. **使用頻度** > 使用頻度の低いもの
4. **英語表記** > カタカナ表記（技術用語の場合）

**一括置換の実行：**

```text
【リンク表記統一手順】
1. grep_searchで旧表記のリンクを全検索
2. 全ての[[旧表記]]を[[新表記]]に一括置換
3. 置換後のリンク切れチェック実行
4. ファイル構造インデックス.mdを更新
```

#### 用語抽出の基準

**リンク化すべき用語：**

1. **技術用語・専門用語**

   - プログラミング言語（Python、JavaScript、Go 等）
   - フレームワーク・ライブラリ（React、Django、Express 等）
   - ツール・サービス（Docker、Git、AWS 等）
   - 技術概念（オブジェクト指向、関数型プログラミング等）

2. **人名・組織名**

   - 著者名・開発者名
   - 企業名・組織名（重要な場合のみ）

3. **重要なキーワード**
   - 記事の主要テーマに関連する用語
   - 繰り返し言及される概念
   - 他の記事との関連性が高い用語

#### リンク化しない用語

**避けるべきリンク：**

1. **一般的すぎる単語**

   - 「技術」「方法」「システム」「データ」等の汎用語
   - 「良い」「悪い」「簡単」「難しい」等の形容詞

2. **文脈依存の用語**

   - 文章の流れでのみ意味を持つ表現
   - 曖昧で複数の意味を持つ用語

3. **既に十分説明されている一般用語**
   - HTML、CSS 等の基本的な Web 技術（専門的な使用法以外）

### 2. リンク密度の目安

#### 記事全体での推奨リンク数

- **短い記事（500 字未満）**: 3-5 個
- **中程度記事（500-1500 字）**: 5-10 個
- **長い記事（1500 字以上）**: 10-20 個

#### 段落あたりの推奨リンク数

- **1 段落あたり最大 2-3 個**を目安とする
- 連続するリンクは避ける（読みやすさ重視）

### 3. リンク名の命名規則

#### 基本ルール

1. **正式名称を優先**

   - 「JavaScript」（○）vs「JS」（△）
   - 「GitHub」（○）vs「ギットハブ」（×）

2. **スラッシュは\_に置換（必須）**

   - 「CI/CD」→「CI_CD」
   - 「HTML/CSS」→「HTML_CSS」
   - 「OS/2」→「OS_2」
   - 「TCP/IP」→「TCP_IP」
   - 「UI/UX」→「UI_UX」
   - 「I/O」→「I_O」

3. **略語の扱い**
   - 一般的な略語は使用可能（API、IDE、CLI 等）
   - 独自略語は正式名称を優先

#### 表記統一ルール

**優先順位：**

1. **公式名称** > カジュアル名称
2. **英語表記** > カタカナ表記（技術用語の場合）
3. **完全形** > 略語形（曖昧性がある場合）

## 用語カテゴリ別のリンク作成指針

### Programming 関連

**必ずリンク化：**

- プログラミング言語名
- フレームワーク・ライブラリ名
- 設計パターン・概念名

**条件付きリンク化：**

- 基本的な HTML/CSS（特別な使用法の場合のみ）
- 一般的なアルゴリズム名（具体的な実装に関する場合）

### Tools 関連

**必ずリンク化：**

- 開発ツール名（VSCode、IntelliJ 等）
- AI サービス名（ChatGPT、GitHub Copilot 等）
- バージョン管理ツール名

**条件付きリンク化：**

- OS 名（特定の OS 固有の話題の場合のみ）
- ブラウザ名（ブラウザ固有の機能に関する場合のみ）

### Infrastructure 関連

**必ずリンク化：**

- クラウドサービス名（AWS、Azure 等）
- コンテナ技術（Docker、Kubernetes 等）
- ネットワーク技術・プロトコル名

### Finance 関連

**必ずリンク化：**

- 投資商品名・金融商品名
- 投資手法・戦略名
- 金融機関名（重要な場合）

## 品質チェック項目

### リンク作成後の確認事項

- [ ] リンク先ファイルが存在することを確認
- [ ] リンク名が正式名称・統一表記であることを確認
- [ ] スラッシュが\_に適切に置換されていることを確認
- [ ] リンク密度が適切な範囲内であることを確認
- [ ] 文章の読みやすさが保たれていることを確認

### 避けるべきパターン

1. **過剰リンク化**

   - 1 つの段落に 5 個以上のリンク
   - 隣接する単語の連続リンク化

2. **不適切なリンク**

   - 一般的すぎる用語のリンク化
   - 文脈なしには意味をなさない用語

3. **表記の不統一**

   - 同一記事内での表記揺れ
   - 既存用語ファイルとの表記不一致

4. **過度な概念細分化**
   - API.md が存在するのに[[API設計]]を作成
   - Docker.md が存在するのに[[Docker基本]]を作成
   - 修飾語付きの不要な細分化リンク

## トラブルシューティング

### よくある判断迷い

**Q: HTML や CSS はリンク化すべき？**
A: 基本的には No。ただし、CSS Grid、Flexbox 等の特定技術は可。

**Q: 企業名はすべてリンク化すべき？**
A: 記事の主要テーマに関連する重要な企業のみ。

**Q: 略語と正式名称、どちらを優先すべき？**
A: 一般的に使われている表記を優先。API は ○、Application Programming Interface は ×。

**Q: 本文に「CI/CD」と書かれている場合、リンクはどうすべき？**
A: 必ず[[CI_CD]]とする。本文の表記は「CI/CD」のまま、リンクだけスラッシュを\_に置換。

**Q: 「HTML/CSS」「TCP/IP」「UI/UX」等のスラッシュ含み用語は？**
A: 全て\_に置換必須。[[HTML_CSS]]、[[TCP_IP]]、[[UI_UX]]とする。

**Q: Microsoft Azure と Azure、両方のファイルが存在する場合は？**
A: 短い方（Azure）をメインとし、長い方をリダイレクト形式に変更。本文のリンクは[[Azure]]に統一。

**Q: AI と人工知能、どちらをメインファイルにすべき？**
A: 短く一般的な「AI」をメインとし、「人工知能」はリダイレクト。

**Q: 同じ意味の用語が同じディレクトリに複数ある場合の判断基準は？**
A: 1.公式名称 > 2.短い表記 > 3.使用頻度 > 4.英語表記の順で優先。

**Q: API.md が存在するのに「API 設計」「API 管理」のリンクを作るべき？**
A: No。過度な細分化を避け、[[API]]を使用。API.md の中で設計や管理についても扱う。

**Q: Docker.md が存在するのに「Docker 基本」「Docker 入門」のリンクを作るべき？**  
A: No。[[Docker]]を使用し、既存ファイル内で基本から応用まで扱う方針を優先。

**Q: 既存ファイルがあるかどうかの判断基準は？**
A: 修飾語（設計、管理、基本、入門等）を除いた核となる概念で file_search を実行。

**Q: OpenAI API と OpenAI-API、どちらをメインにすべき？**
A: 公式ドキュメントの表記を確認。不明な場合はスペース版[[OpenAI API]]を優先。

**Q: React Router と React-Router、両方のファイルが存在する場合は？**
A: 公式ドキュメントに従う。React 公式ではスペース表記のため[[React Router]]をメイン。

**Q: スペース・ハイフンを含む用語の表記揺れ検索方法は？**
A: file_search("用語 1*用語 2")と grep_search("用語 1.*用語 2", isRegexp=true)の両方を実行。

**Q: 表記揺れがルールベースか意味的かどう判断する？**
A: 文字列パターンで検出可能 → ルールベース、文脈理解が必要 → 意味的検出。

**Q: 「AI」と「人工知能」のような意味的表記揺れの検出方法は？**
A: semantic_search("AI 人工知能 機械学習 artificial intelligence")で類似概念を検索。

**Q: 「Microsoft Azure」と「Azure」はどちらのタイプ？**
A: 意味的表記揺れ。略称と正式名称の関係で、semantic_search での検出が必要。

**Q: ルールベースと意味的検出の両方で見つかった場合は？**
A: 両方の結果を総合して AI エージェントが最終判断。より包括的なファイルを優先。

### エラー回避方法

1. **表記揺れの防止（タイプ別戦略）**

   - 【ルールベース表記揺れ】パターンマッチング検索を徹底
     - file_search + grep_search の組み合わせ使用
     - スペース・ハイフン・大文字小文字の全パターン確認
   - 【意味的表記揺れ】semantic_search での類似概念検出
     - 日英混在、略称正式名称、同義語の幅広い検索
     - 同一ディレクトリ内の関連用語との意味的関連チェック
   - Words.md で最終確認

2. **過剰リンク化の防止**

   - 段落ごとにリンク数をカウント
   - 読み返して自然な流れかを確認

3. **リンク切れの防止**

   - file_search での事前確認を徹底
   - リンク作成後の即座チェック

4. **スラッシュ置換忘れの防止**

   - 用語抽出時点でスラッシュ含み用語を必ず\_に変換
   - リンク作成時に[[CI/CD]]ではなく[[CI_CD]]を徹底
   - 本文表記は変更せず、リンクのみ置換適用

5. **過度な細分化の防止**

   - 修飾語を除いた核となる概念で既存ファイル検索
   - 包括的なファイルが存在する場合は新規作成を避ける
   - 「設計」「管理」「基本」等の安易な追加を避ける

6. **表記揺れ検出の二段階戦略**
   - 【第一段階】ルールベース検出：パターンマッチングによる確実な検出
     - file_search("用語 1*用語 2") + grep_search("用語 1.*用語 2", isRegexp=true)
     - スペース・ハイフン・大文字小文字の全パターン確認
   - 【第二段階】意味的検出：AI による文脈理解と類似概念検出
     - semantic_search()での意味的類似用語検索
     - 日英混在・略称正式名称・同義語の幅広い検出
   - 公式ドキュメントの表記確認を最終判断基準とする
